<html>
    <head>
        <link rel="stylesheet" href="/index.css">
        <link rel="icon" href="twitter.png" type="image/icon type">
        <title>Twitter </title>
    </head>
    <body>
        <div class="main-div">
            <div class="left-div"></div>
            <div class="middle-div">
                <div class="post-div">
                    <h1 align="center">This is a post</h1>
                    <p align="center">Lorem ipsum dolor sit amet, consectetur adipiscing elit. .</p>
                </div>
                <div class="comment-div" id="comment-section">
                    <div class="thread-block" id="thread-block-1">
                        <div class="single-block-of-comment-start-div">
                            <div class="thread-line-div">
                                <div class="dp">
                                    <img src="dp.png" width="100%" height="100%">
                                </div>
                                <!-- <div class="thread-start"></div> -->
                            </div>
                            <div class="comment-text-div">
                                <div class="user-profile-in-thread">
                                    <p>abcd . @abcd . 11:59 IST</p>
                                </div>
                                <div class="comment-text-content">
                                    <p>Mauris facilisis urna fermentum tortor sollicitudin mattis.</p>
                                </div>
                                <div class="comment-reaction-div">
                                    <!-- <p>Reply: 100</p> -->
                                    <div class="tooltip">
                                        
                                        <img src="reply.png" width="20" height="20">
                                        <span class="tooltiptext">Reply: 10</span>
                                    </div>
                                    <div class="tooltip">
                                      <img src="retweet.png" width="20" height="20">
                                        <span class="tooltiptext">Retweet: 10</span>
                                    </div>
                                    <div class="tooltip">
                                      <img src="like.png" width="20" height="20">
                                        <span class="tooltiptext">Like: 10</span>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="single-block-of-comment-start-div">
                            <div class="thread-line-div">
                                <!-- <div class="thread-upper"></div> -->
                                <div class="dp">
                                    <img src="dp.png" width="100%" height="100%">
                                </div>
                                <div class="thread-lower"></div>
                            </div>
                            <div class="comment-text-div">
                                <div class="user-profile-in-thread">
                                    <p>abc . @abc . 11:59 IST</p>
                                </div>
                                <div class="comment-text-content">
                                    <p>Donec sit amet semper tortor. Quisque vitae volutpat mauris.</p>
                                </div>
                                <div class="comment-reaction-div">
                                    <div class="tooltip">
                                        
                                        <img src="reply.png" width="20" height="20">
                                        <span class="tooltiptext">Reply: 10</span>
                                    </div>
                                    <div class="tooltip">
                                      <img src="retweet.png" width="20" height="20">
                                        <span class="tooltiptext">Retweet: 20</span>
                                    </div>
                                    <div class="tooltip">
                                      <img src="like.png" width="20" height="20">
                                        <span class="tooltiptext">Like: 10</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div id="reply-div-1" class="show-replies-div">
                            <div class="thread-line-reply-div">
                                <div class="dotted-thread-div"></div>
                                <div class="dotted-thread-div"></div>
                                <div class="dotted-thread-div"></div>
                            </div>
                            <div class="comment-text-div">
                                <h2 id="reply-link" align="center" onclick="loadThread()">Show replies (3)</h2>
                            </div>
                        </div>
                    </div>
                    
                    
                    
                </div>
            </div>
            <div class="right-div"></div>
        </div>
    </body>
</html>

<script type="text/javascript">

    function DOMObjectCreator(){
        var CreatedDOMObject = {};
                CreatedDOMObject.mainContainer = document.createElement("div");
                CreatedDOMObject.threadLine = document.createElement("div");
                CreatedDOMObject.threadUpper = document.createElement("div");
                CreatedDOMObject.DPMid = document.createElement("div");
                CreatedDOMObject.threadLower = document.createElement("div");
                CreatedDOMObject.commentText = document.createElement("div");
                CreatedDOMObject.nameH2 = document.createElement("p");
                CreatedDOMObject.id = document.createElement("p");
                CreatedDOMObject.userProfileDiv = document.createElement("div");
                CreatedDOMObject.commentReactionDiv = document.createElement("div");
                CreatedDOMObject.commentTextContent = document.createElement("div");
                CreatedDOMObject.timeOfPost = document.createElement("p");
                CreatedDOMObject.postText = document.createElement("p");
                CreatedDOMObject.replytooltip = document.createElement("div");
                CreatedDOMObject.retweettooltip = document.createElement("div");
                CreatedDOMObject.liketooltip = document.createElement("div");
                CreatedDOMObject.replytipspan = document.createElement("span");
                CreatedDOMObject.retweettipspan = document.createElement("span");
                CreatedDOMObject.liketipspan = document.createElement("span");
                CreatedDOMObject.replyimg = document.createElement("img");
                CreatedDOMObject.retweetimg = document.createElement("img");
                CreatedDOMObject.likeimg = document.createElement("img");
                CreatedDOMObject.dp = document.createElement("img");
            return CreatedDOMObject;
    }

    function assignClassToDOMObject(CreatedDOMObject){
        CreatedDOMObject.replytooltip.className = "tooltip";
        CreatedDOMObject.retweettooltip.className = "tooltip";
        CreatedDOMObject.liketooltip.className = "tooltip";
        CreatedDOMObject.replytipspan.className = "tooltiptext";
        CreatedDOMObject.retweettipspan.className = "tooltiptext";
        CreatedDOMObject.liketipspan.className = "tooltiptext";
        CreatedDOMObject.threadLine.className = "thread-line-div";
        CreatedDOMObject.threadUpper.className = "thread-upper";
        CreatedDOMObject.threadLower.className = "thread-lower";
        CreatedDOMObject.userProfileDiv.className = "user-profile-in-thread";
        CreatedDOMObject.DPMid.className = "dp-mid";
        CreatedDOMObject.commentText.className = "comment-text-div";
        CreatedDOMObject.commentReactionDiv.className = "comment-reaction-div";
        CreatedDOMObject.commentTextContent.className = "comment-text-content";
        CreatedDOMObject.mainContainer.className = "single-block-of-comment-mid-div";
    }

    function stylingDOMObject(CreatedDOMObject){
        CreatedDOMObject.replyimg.height = "20";
        CreatedDOMObject.replyimg.width = "20";
        CreatedDOMObject.retweetimg.height = "20";
        CreatedDOMObject.retweetimg.width = "20";
        CreatedDOMObject.likeimg.height = "20";
        CreatedDOMObject.likeimg.width = "20";
        CreatedDOMObject.dp.style.width = "100%";
        CreatedDOMObject.dp.style.height = "100%";

    }

    function puttingValuesInDOMObject(CreatedDOMObject,tweets,key){
        CreatedDOMObject.replyimg.src = "reply.png";
        CreatedDOMObject.retweetimg.src = "retweet.png";
        CreatedDOMObject.likeimg.src = "like.png";
        CreatedDOMObject.nameH2.innerHTML = tweets[key]["user"]["name"] + " . " + tweets[key]["user"]["twitterID"] + " . " + tweets[key]["time"]["time_of_post"];
        CreatedDOMObject.id.innerHTML = tweets[key]["user"]["twitterID"];
        CreatedDOMObject.dp.src = "dp.png";
        CreatedDOMObject.postText.innerHTML = tweets[key]["post"]["text"];
        CreatedDOMObject.replytipspan.innerHTML = "Reply: " + tweets[key]["stats"]["reply"];
        CreatedDOMObject.retweettipspan.innerHTML = "Retweet: " + tweets[key]["stats"]["retweets"];
        CreatedDOMObject.liketipspan.innerHTML = "Like " + tweets[key]["stats"]["likes"];
        CreatedDOMObject.timeOfPost.innerHTML = tweets[key]["time"]["time_of_post"];
    }

    function appendingChildInProperOrder(CreatedDOMObject){
        CreatedDOMObject.threadLine.appendChild(CreatedDOMObject.threadUpper);
                CreatedDOMObject.DPMid.appendChild(CreatedDOMObject.dp);
                CreatedDOMObject.threadLine.appendChild(CreatedDOMObject.DPMid);
                CreatedDOMObject.threadLine.appendChild(CreatedDOMObject.threadLower);
                CreatedDOMObject.mainContainer.appendChild(CreatedDOMObject.threadLine);

                CreatedDOMObject.userProfileDiv.appendChild(CreatedDOMObject.nameH2);
                // userProfileDiv.appendChild(id);
                // userProfileDiv.appendChild(timeOfPost);
                
                CreatedDOMObject.commentText.appendChild(CreatedDOMObject.userProfileDiv);
                
                CreatedDOMObject.commentTextContent.appendChild(CreatedDOMObject.postText);
                CreatedDOMObject.commentText.appendChild(CreatedDOMObject.commentTextContent);
                CreatedDOMObject.replytooltip.appendChild(CreatedDOMObject.replyimg);
                CreatedDOMObject.retweettooltip.appendChild(CreatedDOMObject.retweetimg);
                CreatedDOMObject.liketooltip.appendChild(CreatedDOMObject.likeimg);
                CreatedDOMObject.replytooltip.appendChild(CreatedDOMObject.replytipspan);
                CreatedDOMObject.retweettooltip.appendChild(CreatedDOMObject.retweettipspan);
                CreatedDOMObject.liketooltip.appendChild(CreatedDOMObject.liketipspan);
                CreatedDOMObject.commentReactionDiv.appendChild(CreatedDOMObject.replytooltip);
                CreatedDOMObject.commentReactionDiv.appendChild(CreatedDOMObject.retweettooltip);
                CreatedDOMObject.commentReactionDiv.appendChild(CreatedDOMObject.liketooltip);
                CreatedDOMObject.commentText.appendChild(CreatedDOMObject.commentReactionDiv);
                CreatedDOMObject.mainContainer.appendChild(CreatedDOMObject.commentText);
                document.getElementById("thread-block-1").appendChild(CreatedDOMObject.mainContainer);
        
    }

    loadThread = () => {
    var replyDiv = document.getElementById("reply-div-1");
    replyDiv.style.display = "none";
    
    var response = fetch("/thread/1")
    .then(response => response.json())
    .then(tweets => {
            for(key in tweets){
                CreatedDOMObject = DOMObjectCreator();
                assignClassToDOMObject(CreatedDOMObject);
                stylingDOMObject(CreatedDOMObject);
                puttingValuesInDOMObject(CreatedDOMObject,tweets,key);
                appendingChildInProperOrder(CreatedDOMObject);   
            }
        } 
    );        
}

</script>
    
    


